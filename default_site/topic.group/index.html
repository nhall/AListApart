{exp:channel:entries category="{segment_2_category_id}" require_entry="yes" channel="articles|columns" limit="1" status="open" dynamic="off"}

{if no_results}
{redirect="404"}
{/if}

{global-page-top}

	<title>A List Apart Articles about {segment_2_category_name}</title>
	<meta name="description" content="">
	<meta name="author" content="">
		
</head>

<body>

{current-user-info}

	{primary-logo}
	
	<div role="main" class="main-wrapper two-column-display">
	
		<div class="col-holder">
		
			<article class="main-content">
			
				<h1 class="basic-title">Topic: <b>{segment_2_category_name}</b></h1>
				
				{if !segment_3}<p class="author-bio">{segment_2_category_description}</p>{/if}
				
				{/exp:channel:entries}
				
				{if segment_3}
				{embed="embeds/topic-list" cat_id="{segment_2_category_id}" offset="{segment_3}"}
				{if:else}
				{embed="embeds/topic-list" cat_id="{segment_2_category_id}" offset="0"}
				{/if}
				
				<nav class="paginator" role="toolbar">
			
					<ul>
						{if segment_3}
				
						<?php
						
						$thisBatch = {segment_3} + 0;
						$previousBatch = $thisBatch + 20;
						$nextBatch = $thisBatch - 20;
						
						$totalCount = {exp:catcount cat_id="{segment_2_category_id}" status="open"};
						$totalBatches = ceil($totalCount / 20);
						
						if (($thisBatch / 10) != $totalBatches) {?>
						
						<li><a class="previous" href="/topic/{segment_2}/<?php echo $previousBatch; ?>">Previous</a></li>
						
						<?php }; ?>
						
						<li><a class="next" href="/topic/{segment_2}/<?php if ($nextBatch > 0) echo $nextBatch; ?>">Next</a></li>
						
						{if:else}
						
						<li><a class="previous" href="/topic/{segment_2}/20">Previous</a></li>
						
						{/if}
					</ul>
				
				</nav>
			
			</article><!--
			
			--><div class="secondary-column">
			
				{sponsor-top}
				
				<h2>Topics</h2>
				
				{topic-nav}
				
				{ads}
			
			</div>
		
		</div>
		
		
	
	</div>
	
	{global-nav}

{global-footer}
	
{global-page-bottom}